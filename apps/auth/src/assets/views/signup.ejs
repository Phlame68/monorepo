<script type="module" src="/js/signup.js"></script>

<div class="col-lg-5 offset-lg-1 pt-3">
    <div class="text-center pb-4">
        <img src="/img/logo.png" width="60" alt="THX Logo" />
    </div>
    <div class="card shadow-lg">
        <div class="card-body p-sm-4">
            <% if (locals.alert && alert.message && alert.variant==='danger' ) { %>
            <div class="alert alert-<%= alert.variant %>">
                <%= alert.message %>
            </div>
            <% } %>
            <% if (locals.alert && alert.message && alert.variant==='success' ) { %>
            <strong class="h2 d-block text-dark text-center mb-4">
                THX for signing up!
            </strong>
            <div class="alert alert-<%= alert.variant %>">
                <%= alert.message %>
            </div>
            <% } else { %>
            <!-- <div class="d-flex w-full align-items-center justify-content-start flex-wrap">
                <% if (params.authRequestMessage) { %>
                <a style="width: 40px; height: 40px;" class="mr-2 mb-2 btn d-flex center-center  btn-light"
                   @click="signin()" data-toggle="tooltip" title="Sign up with Metamask">
                    <img width="25" src="/img/mm-logo.svg" alt="Metamask logo" />
                </a>
                <% } %>
                <% if (params.googleLoginUrl) { %>
                <a style="width: 40px; height: 40px;" class="mr-2 mb-2 btn d-flex center-center btn-light"
                   href="<%= params.googleLoginUrl %>" data-toggle="tooltip" title="Sign up with Google">
                    <img width="20" src="/img/g-logo.png" alt="Google logo" />
                </a>
                <% } %>
                <% if (params.twitterLoginUrl) { %>
                <a style="width: 40px; height: 40px;" class="mr-2 mb-2  btn d-flex center-center  btn-light"
                   href="<%= params.twitterLoginUrl %>" data-toggle="tooltip" title="Sign up with Twitter">
                    <img width="20" src="/img/t-logo.png" alt="Twitter logo" />
                </a>
                <% } %>
                <% if (params.discordLoginUrl) { %>
                <a style="width: 40px; height: 40px;" class="mr-2 mb-2  btn d-flex center-center  btn-light"
                   href="<%= params.discordLoginUrl %>" data-toggle="tooltip" title="Sign up with Discord">
                    <img width="20" src="/img/discord-logo.png" alt="Discord logo" />
                </a>
                <% } %>
                <% if (params.githubLoginUrl) { %>
                <a style="width: 40px; height: 40px;" class="mr-2 mb-2  btn d-flex center-center btn-light"
                   href="<%= params.githubLoginUrl %>" data-toggle="tooltip" title="Sign up with Github">
                    <img width="20" src="/img/github-logo.png" alt="github logo" />
                </a>
                <% } %>
                <% if (params.twitchLoginUrl) { %>
                <a style="width: 40px; height: 40px;" class="mr-2 mb-2 btn d-flex center-center  btn-light"
                   href="<%= params.twitchLoginUrl %>" data-toggle="tooltip" title="Sign up with Twitch">
                    <img width="20" src="/img/twitch-logo.png" alt="twitch logo" />
                </a>
                <% } %>
            </div> -->
            <!-- <p class="mt-2 text-muted">Or sign up using your e-mail</p> -->
            <form autocomplete="off" action="/oidc/<%= uid %>/signup" method="post">
                <div class="form-group">
                    <input placeholder="E-mail" class="form-control" type="email" name="email" v-model="email"
                           data-email="<%= params.signup_email %>" required :class="{
                        'is-valid': email && validEmail, 'is-invalid': email && !validEmail
                    }" />
                </div>
                <div class="form-group position-relative">
                    <input placeholder="Password" @blur="showPopover = false" @focus="showPopover = true"
                           class="form-control" autocomplete required type="password" name="password" v-model="password"
                           :class="{
                            'is-valid': password && validPassword, 'is-invalid': password && !validPassword
                        }">
                    <div class="popover" v-if="showPopover"
                         style="top: 100%; position: absolute; left: 0; right: 0; margin-top: .5rem">
                        <div class="popover-body">
                            <ul class="pl-3 mb-1">
                                <li v-for="v in validations" class="small"
                                    :class="{'text-success': v.valid, 'text-danger': !v.valid}">
                                    {{v.hint}}
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <input placeholder="Password again" class="form-control" autocomplete required type="password"
                           name="confirmPassword" v-model="passwordRepeat" :class="{
                            'is-valid': passwordRepeat && validPasswordRepeat, 'is-invalid': passwordRepeat && !validPasswordRepeat
                        }">
                </div>
                <div class="form-group">
                    <div class="m-0 custom-control custom-checkbox b-custom-control-sm">
                        <input id="acceptTermsPrivacy" type="checkbox" name="acceptTermsPrivacy"
                               class="custom-control-input" :value="true" v-model="acceptTermsPrivacy">
                        <label for="acceptTermsPrivacy" class="custom-control-label font-weight-normal">
                            I agree to THX' <a href="<%= publicUrl %>/general-terms-and-conditions.pdf"
                               target="_blank">terms of use</a> and <a href="<%= publicUrl %>/privacy-policy.pdf"
                               target="_blank">privacy statement</a>
                        </label>
                    </div>
                    <div class="custom-control custom-checkbox b-custom-control-sm">
                        <input id="acceptUpdates" type="checkbox" name="acceptUpdates" class="custom-control-input"
                               value="true">
                        <label for="acceptUpdates" class="custom-control-label font-weight-normal">
                            Opt-in to receive updates from THX on its products, you can opt-out at any time.
                        </label>
                    </div>
                    <input type="hidden" name="returnUrl" value="<%= params.return_url %>" />
                </div>
                <div class="form-group row mb-0">
                    <div class="col-md-12">
                        <button type="submit" class="btn rounded-pill mt-3 btn-primary btn-block"
                                :disabled="!validPassword || !validPasswordRepeat || !acceptTermsPrivacy">
                            Sign-up
                        </button>
                    </div>
                </div>
            </form>
            <% } %>
        </div>
        <div class="card-footer">
            <a class="btn btn-block p-0 btn-link" href="/oidc/<%= uid %>/signin">
                Already have an account? Sign in.
            </a>
        </div>
    </div>
</div>
<div class="col-lg-5 d-flex align-items-center mt-lg-5">
    <ul class="list-group text-white pl-lg-5 mt-5" style="list-style: none;">
        <li class="list-group-item bg-darker mb-1 py-4">
            <div class="d-flex">
                <div class="pr-2"><i class="fas fa-check-circle text-primary" aria-hidden="true"></i></div>
                <div class="text-light">
                    <strong>Fast &amp; free transactions</strong><br>
                    The Polygon blockchain provides fast and free transactions for your end-users.
                </div>
            </div>
        </li>
        <li class="list-group-item bg-darker mb-1 py-4">
            <div class="d-flex">
                <div class="pr-2"><i class="fas fa-check-circle text-primary" aria-hidden="true"></i></div>
                <div><strong>Only pay for success</strong><br> Transactional fees mean you only pay when your users are
                    getting value.</div>
            </div>
        </li>
        <li class="list-group-item bg-darker mb-1 py-4">
            <div class="d-flex">
                <div class="pr-2"><i class="fas fa-check-circle text-primary" aria-hidden="true"></i></div>
                <div><strong>Easy integration</strong><br>Embedding a widget is as easy as copy/pasting a piece of code.
                </div>
            </div>
        </li>
        <li class="list-group-item bg-darker mb-1 py-4">
            <div class="d-flex">
                <div class="pr-2"><i class="fas fa-check-circle text-primary" aria-hidden="true"></i></div>
                <div><strong>Secure</strong><br> We provide best-in-class key management and key backup solutions for
                    your users. </div>
            </div>
        </li>
    </ul>
</div>